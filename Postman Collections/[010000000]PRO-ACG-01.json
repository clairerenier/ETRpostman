{
  "variables": [],
  "info": {
    "name": "[010000000]PRO-ACG-01",
    "_postman_id": "dfdaa9fc-6991-9322-f297-c18be0096d75",
    "description": "Object used : \nFGA : C220",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "_postman_id": "396c3b69-1e90-8c7e-971b-8e30711b6996",
      "name": "[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220 et SGGU2103Z",
      "description": "o\t0 - First file to generate data from scratch\r\n\tExpeted result : all hours set to OUI\r\no\t1-First file dropped to generate data\r\n\tExpected result : everything is saved (all hours set to OUI)\r\no\t2  Same file dropped with the following changes : \r\n"\tMETMOY 8h has its value changed (89,63 to 90.63)\r\n"\tNothing changed for 9AM\r\no\t3  Same file dropped with the following changes : \r\n"\tDENMOY 7h quality will be AF (M before)\r\n"\tMETMOY 8h has its value changed (90,63 to 91.63)\r\n"\tNothing changed for 9AM\r\n\tExpected result : 7 and 8AM whould be set to OUI , and NON for 9h\r\no\t4  Same file dropped where :\r\n"\t9AM is changed PCSMOY will be CS (quality = to the previous one)\r\n"\tMETMOY 8h has its value changed (91,63 to 89.63)\r\n\tExpected result : all set to NON except 8AM\r\no\t5 - Same file dropped where only 8AM is changed PCSMOY from AF to CS (quality <)\r\n\tExpected result : all set to NON\r\no\t6  Same file dropped but PCSMOY to CS for 8h\r\n\tExpected result : 8AM set to OUI\r\n\r\no\t7  Run first file\r\n"\tPCSMOY is set to 6/7/8AM AF, rest are set to CS\r\n"\tExpected results : everything set to OUI\r\no\t8  Run second file\r\n"\tPCSMOY is unchanged for 678, for rest of the hours, they are set to AF\r\n"\tExpected results everything set to OUI except 6/7/8AM",
      "item": [
        {
          "_postman_id": "8bb0128a-3295-a8f9-b522-3069d973e9f4",
          "name": "[011102400FGA]Delete and Update data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "for(var i= 0; i < sqlResult.length; i++)",
                  "{",
                  "    switch (sqlResult[i].requestId) {",
                  "        case \"DeletePointData\":",
                  "            tests[\"Delete Point Data\"] = true;",
                  "            break;",
                  "        case \"DeleteAcqFgaData\":",
                  "            tests[\"Delete Acq_Fga Data\"] = true;",
                  "            break;",
                  "        case \"DeletePubPointJmnFgaData\":",
                  "            tests[\"Delete Pub_Point_Jmn_Fga Data\"] = true;",
                  "            break;",
                  "    }",
                  "}",
                  "if ( tests[\"Delete Point Data\"] && tests[\"Delete Acq_Fga Data\"] && tests[\"Delete Pub_Point_Jmn_Fga Data\"]){",
                  "    tests[\"Delete data Sum up\"] = true; ",
                  "    postman.setNextRequest(\"[011102400FGA]Drop file FGA\");",
                  "}",
                  "else {",
                  "   tests[\"Delete data Sum up\"] = fase; ",
                  "   //postman.setNextRequest(null);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n            {  \r\n         \"requestId\":\"DeletePointData\",\r\n         \"requestContent\":\"delete from point where uidpoint in (select po.uidpoint from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('23/02/2017 09:00:00','DD/MM/YYYY HH24:MI:SS') and Idfga in ('C220'))\"\r\n      },\r\n      {  \r\n         \"requestId\":\"DeleteAcqFgaData\",\r\n         \"requestContent\":\"delete from acq_fga_conservee where uidacq_fga_conservee in (select uidacq_fga_conservee from acq_fga_conservee where code_acquisition in ('C220'))\"\r\n      },\r\n      {  \r\n         \"requestId\":\"DeletePubPointJmnFgaData\",\r\n         \"requestContent\":\"delete from pub_point_jmn_fga where uidgrandeur in (select pp.uidgrandeur from pub_point_jmn_fga pp, fga p, grandeur g, GRANDEURS_OBJET go where  pp.uidgrandeur=g.UIDGRANDEUR and g.UIDGRANDEURS_OBJET=go.UIDGRANDEURS_OBJET and go.uidgrandeurs_objet=p.uidgrandeurs_objet and p.idfga='C220' and horodate between TO_DATE('2017-02-23 06:00:00', 'YYYY-MM-DD HH24:MI:SS')and TO_DATE('2017-02-24 05:00:00', 'YYYY-MM-DD HH24:MI:SS'))\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "193ecbdb-362c-6baa-cc18-3fd46c02c21f",
          "name": "[011102400FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102400FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105000_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "7c0e0dde-315f-b18c-6935-d008e3922351",
          "name": "[011102400FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102400FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var sourcprocessid = postman.getEnvironmentVariable(\"[011102401]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\");",
                  "console.log(sourcprocessid);"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "67df8a2b-5ab2-9d3b-6f37-c89a6b9a707b",
          "name": "[011102400FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                ",
                  "                if (sqlResult[i].results.length ==4){",
                  "                    if (sqlResult[i].results[0].STOCKAGE==\"OUI\" && sqlResult[i].results[1].STOCKAGE==\"OUI\" && sqlResult[i].results[2].STOCKAGE==\"OUI\" && sqlResult[i].results[3].STOCKAGE==\"OUI\"){",
                  "                        tests[\"Check Stock_acquisition2\"]=true;",
                  "                    }",
                  "                    else{",
                  "                        tests[\"Check Stock_acquisition2\"]=false;",
                  "                    }",
                  "                }",
                  "                else{",
                  "                     tests[\"Check Stock_acquisition2\"]=false;",
                  "                }",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckPointData\":",
                  "                tests[\"Check POINT data\"] = sqlResult[i].results[0].COUNT == \"130\";",
                  "                break;",
                  "",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[011102401FGA]Delete and Update data\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('C220') and jour_gazier= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}') group by date_mesure,stockage order by date_mesure asc\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('C220') and po.lstime >= (sysdate-1/24/4)\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "4e28a05a-8c37-4ffb-2c22-e0bae3d97d67",
          "name": "[011102401FGA]Delete and Update data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "for(var i= 0; i < sqlResult.length; i++)",
                  "{",
                  "    switch (sqlResult[i].requestId) {",
                  "        case \"UpdatePointData\":",
                  "            tests[\"Update Point Data\"] = true;",
                  "            break;",
                  "        case \"DeletePointData\":",
                  "            tests[\"Delete Point Data\"] = true;",
                  "            break;",
                  "    }",
                  "}",
                  "if (tests[\"Update Point Data\"] && tests[\"Delete Point Data\"] ){",
                  "    tests[\"Delete data Sum up\"] = true; ",
                  "    postman.setNextRequest(\"[011102401FGA]Drop file FGA\");",
                  "}",
                  "else {",
                  "   tests[\"Delete data Sum up\"] = fase; ",
                  "   //postman.setNextRequest(null);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"UpdatePointData\",\r\n         \"requestContent\":\"update point set uidqualite_point='15', valeur='0' where uidpoint in (select po.uidpoint from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') and Idfga in ('C220'))\"\r\n      },\r\n            {  \r\n         \"requestId\":\"DeletePointData\",\r\n         \"requestContent\":\"delete from point where uidpoint in (select po.uidpoint from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and po.HORODATE >= TO_DATE('23/02/2017 09:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('23/02/2017 09:00:00','DD/MM/YYYY HH24:MI:SS') and Idfga in ('C220'))\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "9a7dff24-2295-7f98-e9da-6ee7c275449d",
          "name": "[011102401FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102401FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105002_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "ed238719-2929-ed0b-511d-31a4e2c312ad",
          "name": "[011102401FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102401FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "c61ffff0-b2bc-a792-41fa-46adb3b20f98",
          "name": "[011102401FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                    tests[\"Check STOCK_ACQUISITION2\"] = sqlResult[i].results[0].COUNT == \"5\";",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckPointData\":",
                  "                tests[\"Check POINT data\"] = sqlResult[i].results[0].COUNT == \"130\";",
                  "                break;",
                  "            case \"CheckPubPointJmnFgaData\":",
                  "                tests[\"Check PUB_POINT_JMN_FGA data\"] = sqlResult[i].results[0].COUNT == \"260\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[011102402FGA]Drop file FGA\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('C220') and jour_gazier= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and  processid='{{[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"SELECT stockage,count(*) as COUNT from (select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}') and stockage='OUI' group by nom_source,date_mesure,processid,pas_chr,stockage order by date_mesure, processid desc) group by stockage order by stockage\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('C220') and po.lstime >= (sysdate-1/24/4)\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPubPointJmnFgaData\",\r\n         \"requestContent\":\"select count(*) as COUNT from PUB_POINT_jmn_fga pp  inner join grandeur on pp.uidgrandeur = grandeur.uidgrandeur  where  horodate between TO_DATE('2017-02-23 06:00:00', 'YYYY-MM-DD HH24:MI:SS')and TO_DATE('2017-02-24 05:00:00', 'YYYY-MM-DD HH24:MI:SS')  and idgrandeur like '%C220%'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102401FGA]PRO_ACG_01_FGA_TNR_SGTUH97A_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "7d8041f4-397b-ef7f-be98-291e931f8d9a",
          "name": "[011102402FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102402FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105003_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "1234cc9a-78d6-48e1-483b-631746dc6272",
          "name": "[011102402FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102402FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var sourcprocessid = postman.getEnvironmentVariable(\"[011102401]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\");",
                  "console.log(sourcprocessid);"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "f24cd023-b15c-f938-1435-d28408efc3bd",
          "name": "[011102402FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                ",
                  "                if (sqlResult[i].results.length ==4){",
                  "                    if (sqlResult[i].results[0].STOCKAGE==\"OUI\" && sqlResult[i].results[1].STOCKAGE==\"OUI\" && sqlResult[i].results[2].STOCKAGE==\"OUI\" && sqlResult[i].results[3].STOCKAGE==\"NON\"){",
                  "                        tests[\"Check Stock_acquisition2\"]=true;",
                  "                    }",
                  "                    else{",
                  "                        tests[\"Check Stock_acquisition2\"]=false;",
                  "                    }",
                  "                }",
                  "                else{",
                  "                     tests[\"Check Stock_acquisition2\"]=false;",
                  "                }",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckPointData\":",
                  "                tests[\"Check POINT data\"] = sqlResult[i].results[0].COUNT == \"130\";",
                  "                break;",
                  "            case \"CheckPubPointJmnFgaData\":",
                  "                tests[\"Check PUB_POINT_JMN_FGA data\"] = sqlResult[i].results[0].COUNT == \"390\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[011102403FGA]Update data\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('C220') and jour_gazier= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}') group by date_mesure,stockage order by date_mesure asc\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('C220') and po.lstime >= (sysdate-1/24/4)\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPubPointJmnFgaData\",\r\n         \"requestContent\":\"select count(*) as COUNT from PUB_POINT_jmn_fga pp  inner join grandeur on pp.uidgrandeur = grandeur.uidgrandeur  where  horodate between TO_DATE('2017-02-23 06:00:00', 'YYYY-MM-DD HH24:MI:SS')and TO_DATE('2017-02-24 05:00:00', 'YYYY-MM-DD HH24:MI:SS')  and idgrandeur like '%C220%'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "8ae46bc8-c8df-5368-81f3-6bc0194f79ec",
          "name": "[011102403FGA]Update data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "for(var i= 0; i < sqlResult.length; i++)",
                  "{",
                  "    switch (sqlResult[i].requestId) {",
                  "        case \"UpdatePointData\":",
                  "            tests[\"Update Point Data\"] = true;",
                  "            break;",
                  "    }",
                  "}",
                  "if (tests[\"Update Point Data\"]){",
                  "    tests[\"Update data Sum up\"] = true; ",
                  "    postman.setNextRequest(\"[011102403FGA]Drop file FGA\");",
                  "}",
                  "else {",
                  "   tests[\"Delete data Sum up\"] = fase; ",
                  "   //postman.setNextRequest(null);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"UpdatePointData\",\r\n         \"requestContent\":\"update point set uidqualite_point='15', valeur='0' where uidpoint in (select po.uidpoint from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and po.HORODATE >= TO_DATE('23/02/2017 07:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('23/02/2017 07:00:00','DD/MM/YYYY HH24:MI:SS') and Idfga in ('C220') and (type_grandeur in ('DENMOY')))\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "8828ad58-0f1e-bb73-71aa-5e130f006d14",
          "name": "[011102403FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102403FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105004_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "db0f207e-08d7-2389-f12c-03df81dcb0ec",
          "name": "[011102403FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102403FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var sourcprocessid = postman.getEnvironmentVariable(\"[011102401]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\");",
                  "console.log(sourcprocessid);"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "91b97d6c-8c7e-0121-2a21-d81a5c6f57b9",
          "name": "[011102403FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                ",
                  "                if (sqlResult[i].results.length ==4){",
                  "                    if (sqlResult[i].results[0].STOCKAGE==\"NON\" && sqlResult[i].results[1].STOCKAGE==\"OUI\" && sqlResult[i].results[2].STOCKAGE==\"OUI\" && sqlResult[i].results[3].STOCKAGE==\"NON\"){",
                  "                        tests[\"Check Stock_acquisition2\"]=true;",
                  "                    }",
                  "                    else{",
                  "                        tests[\"Check Stock_acquisition2\"]=false;",
                  "                    }",
                  "                }",
                  "                else{",
                  "                     tests[\"Check Stock_acquisition2\"]=false;",
                  "                }",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckPointData\":",
                  "                tests[\"Check POINT data\"] = sqlResult[i].results[0].COUNT == \"130\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[011102404FGA]Drop file FGA\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('C220') and jour_gazier= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}') and PAS_CHR='3600' group by date_mesure,stockage order by date_mesure asc\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('C220') and po.lstime >= (sysdate-1/24/4)\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "caa3f0b0-f5b5-ac1a-523b-71f86eaf06bc",
          "name": "[011102404FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102404FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105014_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "681911fe-8ef5-9197-2315-a1d04c44a098",
          "name": "[011102404FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102404FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var sourcprocessid = postman.getEnvironmentVariable(\"[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\");",
                  "console.log(sourcprocessid);"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "19cacd33-2f51-d47d-e509-f7b54d82e9b7",
          "name": "[011102404FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                ",
                  "                if (sqlResult[i].results.length ==4){",
                  "                    if (sqlResult[i].results[0].STOCKAGE==\"NON\" && sqlResult[i].results[1].STOCKAGE==\"NON\" && sqlResult[i].results[2].STOCKAGE==\"OUI\" && sqlResult[i].results[3].STOCKAGE==\"NON\"){",
                  "                        tests[\"Check Stock_acquisition2\"]=true;",
                  "                    }",
                  "                    else{",
                  "                        tests[\"Check Stock_acquisition2\"]=false;",
                  "                    }",
                  "                }",
                  "                else{",
                  "                     tests[\"Check Stock_acquisition2\"]=false;",
                  "                }",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckPointData\":",
                  "                tests[\"Check POINT data\"] = sqlResult[i].results[0].COUNT == \"130\";",
                  "                break;",
                  "",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[011102405FGA]Drop file FGA\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('C220') and jour_gazier= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}') and PAS_CHR='3600' group by date_mesure,stockage order by date_mesure asc\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('C220') and po.lstime >= (sysdate-1/24/4)\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "be9f712f-bf37-3c4d-84b5-c04409753788",
          "name": "[011102405FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102405FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105005_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "9b8b5b3b-7ffb-cf76-39b8-c8a428def5c9",
          "name": "[011102405FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102405FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var sourcprocessid = postman.getEnvironmentVariable(\"[011102401]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\");",
                  "console.log(sourcprocessid);"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "f2139f97-0bd1-52d5-a36f-43e200fb62c3",
          "name": "[011102405FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                ",
                  "                if (sqlResult[i].results.length ==4){",
                  "                    if (sqlResult[i].results[0].STOCKAGE==\"NON\" && sqlResult[i].results[1].STOCKAGE==\"NON\" && sqlResult[i].results[2].STOCKAGE==\"NON\" && sqlResult[i].results[3].STOCKAGE==\"NON\"){",
                  "                        tests[\"Check Stock_acquisition2\"]=true;",
                  "                    }",
                  "                    else{",
                  "                        tests[\"Check Stock_acquisition2\"]=false;",
                  "                    }",
                  "                }",
                  "                else{",
                  "                     tests[\"Check Stock_acquisition2\"]=false;",
                  "                }",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckPointData\":",
                  "                tests[\"Check POINT data\"] = sqlResult[i].results[0].COUNT == \"130\";",
                  "                break;",
                  "",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[011102406FGA]Update data\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('C220') and jour_gazier= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}') group by date_mesure,stockage order by date_mesure asc\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('C220') and po.lstime >= (sysdate-1/24/4)\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "8462529c-f808-f89e-efe3-763aff04000c",
          "name": "[011102406FGA]Update data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "for(var i= 0; i < sqlResult.length; i++)",
                  "{",
                  "    switch (sqlResult[i].requestId) {",
                  "        case \"UpdatePointData\":",
                  "            tests[\"Update Point Data\"] = true;",
                  "            break;",
                  "    }",
                  "}",
                  "if (tests[\"Update Point Data\"]){",
                  "    tests[\"Update data Sum up\"] = true; ",
                  "    postman.setNextRequest(\"[011102406FGA]Drop file FGA\");",
                  "}",
                  "else {",
                  "   tests[\"Delete data Sum up\"] = fase; ",
                  "   //postman.setNextRequest(null);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"UpdatePointData\",\r\n         \"requestContent\":\"update point set uidqualite_point='15' where uidpoint in (select po.uidpoint from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and po.HORODATE >= TO_DATE('23/02/2017 08:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('23/02/2017 08:00:00','DD/MM/YYYY HH24:MI:SS') and Idfga in ('C220'))\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "8c7566aa-88bd-779d-eb6c-505198b66a0e",
          "name": "[011102406FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102406FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105006_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "19db1a8e-1a1e-6114-435d-8700db902f0a",
          "name": "[011102406FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102406FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var sourcprocessid = postman.getEnvironmentVariable(\"[011102401]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\");",
                  "console.log(sourcprocessid);"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "dccbce3f-f2ab-8a5c-00ad-2e5476b39d87",
          "name": "[011102406FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                ",
                  "                if (sqlResult[i].results.length ==4){",
                  "                    if (sqlResult[i].results[0].STOCKAGE==\"NON\" && sqlResult[i].results[1].STOCKAGE==\"NON\" && sqlResult[i].results[2].STOCKAGE==\"OUI\" && sqlResult[i].results[3].STOCKAGE==\"NON\"){",
                  "                        tests[\"Check Stock_acquisition2\"]=true;",
                  "                    }",
                  "                    else{",
                  "                        tests[\"Check Stock_acquisition2\"]=false;",
                  "                    }",
                  "                }",
                  "                else{",
                  "                     tests[\"Check Stock_acquisition2\"]=false;",
                  "                }",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckPointData\":",
                  "                tests[\"Check POINT data\"] = sqlResult[i].results[0].COUNT == \"130\";",
                  "                break;",
                  "",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[011102407FGA]Delete and Update data\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('C220') and jour_gazier= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}') and pas_chr='3600' group by date_mesure,stockage order by date_mesure asc\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('C220') and po.lstime >= (sysdate-1/24/4)\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "660dca15-19f3-0bc6-e407-e39d4558d128",
          "name": "[011102407FGA]Delete and Update data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "for(var i= 0; i < sqlResult.length; i++)",
                  "{",
                  "    switch (sqlResult[i].requestId) {",
                  "        case \"DeletePointData\":",
                  "            tests[\"Delete Point Data\"] = true;",
                  "            break;",
                  "        case \"DeleteAcqFgaData\":",
                  "            tests[\"Delete Acq_Fga Data\"] = true;",
                  "            break;",
                  "        case \"DeletePubPointJmnFgaData\":",
                  "            tests[\"Delete Pub_Point_Jmn_Fga Data\"] = true;",
                  "            break;",
                  "    }",
                  "}",
                  "if ( tests[\"Delete Point Data\"] && tests[\"Delete Acq_Fga Data\"] && tests[\"Delete Pub_Point_Jmn_Fga Data\"]){",
                  "    tests[\"Delete data Sum up\"] = true; ",
                  "    postman.setNextRequest(\"[011102407FGA]Drop file FGA\");",
                  "}",
                  "else {",
                  "   tests[\"Delete data Sum up\"] = fase; ",
                  "   //postman.setNextRequest(null);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n            {  \r\n         \"requestId\":\"DeletePointData\",\r\n         \"requestContent\":\"Delete from point where uidpoint in (select uidpoint from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and po.HORODATE >= TO_DATE('05/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('07/03/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') and idfga in ('SGGU2103Z'))\"\r\n      },\r\n      {  \r\n         \"requestId\":\"DeleteAcqFgaData\",\r\n         \"requestContent\":\"delete from acq_fga_conservee where uidacq_fga_conservee in (select uidacq_fga_conservee from acq_fga_conservee where code_acquisition in ('SGGU2103Z'))\"\r\n      },\r\n      {  \r\n         \"requestId\":\"DeletePubPointJmnFgaData\",\r\n         \"requestContent\":\"delete from pub_point_jmn_fga where uidgrandeur in (select pp.uidgrandeur from pub_point_jmn_fga pp, fga p, grandeur g, GRANDEURS_OBJET go where  pp.uidgrandeur=g.UIDGRANDEUR and g.UIDGRANDEURS_OBJET=go.UIDGRANDEURS_OBJET and go.uidgrandeurs_objet=p.uidgrandeurs_objet and p.idfga='SGGU2103Z' and horodate between TO_DATE('2017-03-05 06:00:00', 'YYYY-MM-DD HH24:MI:SS')and TO_DATE('2017-03-07 05:00:00', 'YYYY-MM-DD HH24:MI:SS'))\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "2c37220d-ed3d-d5c2-3203-9b20f361cc8b",
          "name": "[011102407FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102407FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"J20170306_FGA_20170307062203_CHR02_SCALA_100-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "e2468712-b044-7f30-4fcc-f10ded648e09",
          "name": "[011102407FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102407FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "c7ae03e5-b64c-a1c9-17ff-a46425a2467c",
          "name": "[011102407FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                tests[\"Check Stock_acquisition2\"]= sqlResult[i].results[0].COUNT == \"24\";",
                  "",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[011102408FGA]Drop file FGA\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('SGGU2103Z') and jour_gazier= TO_DATE('06/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"select stockage,count(*) as COUNT from (select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}') and pas_chr='3600' group by date_mesure,stockage order by date_mesure asc) group by stockage\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "1bd6dabe-f102-cb4d-411d-a8db7c36e05a",
          "name": "[011102408FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102408FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"J20170306_FGA_20170307061702_CHR02_SCALA_101-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "fe9e02f8-45f9-f09e-bfa0-c7e79371d975",
          "name": "[011102408FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102408FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var sourcprocessid = postman.getEnvironmentVariable(\"[011102401]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\");",
                  "console.log(sourcprocessid);"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "bc2a617e-d778-5059-aab7-e91562009944",
          "name": "[011102408FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                if (sqlResult[i].results.length ==24){",
                  "                    if (sqlResult[i].results[0].STOCKAGE==\"NON\" ",
                  "                    && sqlResult[i].results[1].STOCKAGE==\"NON\" ",
                  "                    && sqlResult[i].results[2].STOCKAGE==\"NON\" ",
                  "                    && sqlResult[i].results[3].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[4].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[5].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[6].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[7].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[8].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[9].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[10].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[11].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[12].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[13].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[14].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[15].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[16].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[17].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[18].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[19].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[20].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[21].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[22].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[23].STOCKAGE==\"OUI\"){",
                  "                        tests[\"Check Stock_acquisition2\"]=true;",
                  "                    }",
                  "                    else{",
                  "                        tests[\"Check Stock_acquisition2\"]=false;",
                  "                    }",
                  "                }",
                  "                else{",
                  "                     tests[\"Check Stock_acquisition2\"]=false;",
                  "                }",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckPointData\":",
                  "                tests[\"Check POINT data\"] = sqlResult[i].results[0].COUNT >= \"1\";",
                  "                break;",
                  "",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "//postman.setNextRequest(\"[011102407]Delete and Update data\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('SGGU2103Z') and jour_gazier= TO_DATE('06/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}') and pas_chr='3600' group by date_mesure,stockage order by date_mesure asc\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('06/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('07/03/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('SGGU2103Z') and po.lstime >= (sysdate-1/24/4)\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "bc08a8eb-affc-2b7b-1501-ff20037464f4",
      "name": "[010100500PCE]PRO_ACG_01_PCE_ORC_005  - Todo",
      "description": "",
      "item": []
    },
    {
      "_postman_id": "717dc411-c4da-deec-7a6e-31a3fc9b8f9b",
      "name": "[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC",
      "description": "o\t0 - ko Case - file stops - the format inside is not correct\r\no\t1 - ko Case - name of the file is not correct\r\no\t2 - ok Case - file go through next step",
      "item": [
        {
          "_postman_id": "0c23201d-15cf-f043-d9ab-afe4c4249ff0",
          "name": "[010100100PCE]Drop file PCE",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file PCE\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file PCE\"] = true; ",
                  "   postman.setNextRequest(\"[010100100PCE]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file PCE\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_PCE\",\"fileName\":\"H20170320_PCE_20170320103422_CHR02_SCALA_3-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "aee7ba97-5fc5-a039-844c-dd2b83a8e283",
          "name": "[010100100PCE]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckStatutOrcEtape\":",
                  "                tests[\"Check status in ORC_ETAPE\"] = sqlResult[i].results[0].ID_STATUT_ETAPE == \"2\";",
                  "                break;",
                  "            case \"CheckStatutOrcEtapeMessage\":",
                  "                tests[\"Check message in ORC_ETAPE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckAcqPceConservee\":",
                  "                tests[\"Check ACQ_PCE_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[010100101PCE]Drop file PCE\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      },\r\n            {  \r\n         \"requestId\":\"CheckStatutOrcEtape\",\r\n         \"requestContent\":\"select id_statut_etape from orc_etapes where id_processus='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}' and id_ref_etape='ACG_01_ORC_001'\"\r\n      },\r\n                  {  \r\n         \"requestId\":\"CheckStatutOrcEtapeMessage\",\r\n         \"requestContent\":\"select count(*) as COUNT from orc_etapes where id_processus='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}' and resultat_etape like '%/Enveloppe_VICTOR_PCE/ :  Child element Publication {} at position 1 is unexpected%'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqPceConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_pce_conservee where code_acquisition in ('SGPCETVPEC') and jour_gazier= TO_DATE('20/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "a736d022-1517-c087-f64f-b9aa3c192b6a",
          "name": "[010100101PCE]Drop file PCE",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[010100101PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[010100101PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file PCE\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file PCE\"] = true; ",
                  "   postman.setNextRequest(\"[010100101PCE]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file PCE\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_PCE\",\"fileName\":\"H20170320_PCE_2017032010342_CHR02_SCALA_4-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "c12e331a-37d7-8bd4-47a6-72f46efb6572",
          "name": "[010100101PCE]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "tests[\"Status code is 200\"] = responseCode.code === 200;",
                  "if (tests[\"Status code is 200\"]){",
                  "    var jsonData = JSON.parse(responseBody);",
                  "    var sqlResult = jsonData.sqlResult;",
                  "    if(sqlResult != null){",
                  "        for(var i= 0; i < sqlResult.length; i++)",
                  "        {",
                  "            if(sqlResult[i].results != null){",
                  "                switch (sqlResult[i].requestId) {",
                  "                case \"CheckStatutOrcProcessus\":",
                  "                    tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                    break;",
                  "                case \"CheckStatutOrcEtape\":",
                  "                    tests[\"Check status in ORC_ETAPE\"] = sqlResult[i].results[0].ID_STATUT_ETAPE == \"2\";",
                  "                    break;",
                  "                case \"CheckStatutOrcEtapeMessage\":",
                  "                    tests[\"Check message in ORC_ETAPE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                    break;",
                  "                case \"CheckAcqPceConservee\":",
                  "                    tests[\"Check ACQ_PCE_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                    break;",
                  "                case \"CheckStockAcquisitionForAcq\":",
                  "                    tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                    break;   ",
                  "                }",
                  "            }",
                  "        }",
                  "    }",
                  "    postman.setNextRequest(\"[010100102PCE]Delete data\");",
                  "",
                  "}",
                  "else{",
                  "    postman.setNextRequest(null);",
                  "}",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[010100101PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      },\r\n            {  \r\n         \"requestId\":\"CheckStatutOrcEtape\",\r\n         \"requestContent\":\"select id_statut_etape from orc_etapes where id_processus='{{[010100101PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}' and id_ref_etape='ACG_01_ORC_001'\"\r\n      },\r\n                  {  \r\n         \"requestId\":\"CheckStatutOrcEtapeMessage\",\r\n         \"requestContent\":\"select count(*) as COUNT from orc_etapes where id_processus='{{[010100101PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}' and resultat_etape like '%nom de fichier%'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqPceConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_pce_conservee where code_acquisition in ('SGPCETVPEC') and jour_gazier= TO_DATE('20/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[010100101PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[010100101PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "e8053e41-9d1c-5118-e9b7-61973726f9d7",
          "name": "[010100102PCE]Delete data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "tests[\"Status code is 200\"] = responseCode.code === 200;",
                  "if (tests[\"Status code is 200\"]){",
                  "    var jsonData = JSON.parse(responseBody);",
                  "    var sqlResult = jsonData.sqlResult;",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        switch (sqlResult[i].requestId) {",
                  "            case \"DeletePointData\":",
                  "                tests[\"Delete Point Data\"] = true;",
                  "                break;",
                  "            case \"DeleteAcqFgaData\":",
                  "                tests[\"Delete Acq_Fga Data\"] = true;",
                  "                break;",
                  "        }",
                  "    }",
                  "    if ( tests[\"Delete Point Data\"] && tests[\"Delete Acq_Fga Data\"]){",
                  "        tests[\"Delete data Sum up\"] = true; ",
                  "        postman.setNextRequest(\"[010100102PCE]Drop file PCE\");",
                  "    }",
                  "    else {",
                  "       tests[\"Delete data Sum up\"] = fase; ",
                  "       //postman.setNextRequest(null);",
                  "    }",
                  "}",
                  "else{",
                  "    postman.setNextRequest(null);",
                  "}",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n            {  \r\n         \"requestId\":\"DeletePointData\",\r\n         \"requestContent\":\"delete from point where uidpoint in (select po.uidpoint from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and po.HORODATE >= TO_DATE('20/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('21/03/2017 09:00:00','DD/MM/YYYY HH24:MI:SS') and Idpce in ('SGPCETVPEC'))\"\r\n      },\r\n      {  \r\n         \"requestId\":\"DeleteAcqPceData\",\r\n         \"requestContent\":\"delete from acq_pce_conservee where uidacq_pce_conservee in (select uidacq_pce_conservee from acq_pce_conservee where code_acquisition in ('SGPCETVPEC') and jour_gazier= TO_DATE('20/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS'))\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "55b662ba-3917-d78d-23e6-7d9a1e68be8f",
          "name": "[010100102PCE]Drop file PCE",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "tests[\"Status code is 200\"] = responseCode.code === 200;",
                  "if (tests[\"Status code is 200\"]){",
                  "    var jsonData = JSON.parse(responseBody);",
                  "    postman.setEnvironmentVariable(\"[010100102]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid\",jsonData.processId);",
                  "    postman.setEnvironmentVariable(\"[010100102]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_sourceProcessId\",jsonData.sourceProcessId);",
                  "    ",
                  "    if (jsonData.statusProcess === \"2\"){",
                  "        tests[\"Check drop file PCE\"] = false;",
                  "        //postman.setNextRequest(null);",
                  "    }",
                  "    else if (jsonData.statusProcess === \"4\"){",
                  "       tests[\"Check drop file PCE\"] = true; ",
                  "       postman.setNextRequest(\"[010100101]Check data\");",
                  "    }",
                  "    else {",
                  "        tests[\"Check drop file PCE\"] = false;",
                  "        //postman.setNextRequest(null);  ",
                  "    }",
                  "}",
                  "else{",
                  "    postman.setNextRequest(null);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_PCE\",\"fileName\":\"H20170320_PCE_20170320103420_CHR02_SCALA_5-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"10\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "2e47e67e-ea94-6ae6-1b57-90c2815cdbf5",
          "name": "[010100102PCE]Check data - To do",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "tests[\"Status code is 200\"] = responseCode.code === 200;",
                  "if (tests[\"Status code is 200\"]){",
                  "    var jsonData = JSON.parse(responseBody);",
                  "    var sqlResult = jsonData.sqlResult;",
                  "    if(sqlResult != null){",
                  "        for(var i= 0; i < sqlResult.length; i++)",
                  "        {",
                  "            if(sqlResult[i].results != null){",
                  "                switch (sqlResult[i].requestId) {",
                  "                case \"CheckStatutOrcProcessus\":",
                  "                    tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                    break;",
                  "                case \"CheckStatutOrcEtape\":",
                  "                    tests[\"Check status in ORC_ETAPE\"] = sqlResult[i].results[0].ID_STATUT_ETAPE == \"4\";",
                  "                    break;",
                  "                case \"CheckAcqPceConservee\":",
                  "                    tests[\"Check ACQ_PCE_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                    break;",
                  "                case \"CheckStockAcquisitionForAcq\":",
                  "                    tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                    break;   ",
                  "                }",
                  "            }",
                  "        }",
                  "    }",
                  "    //postman.setNextRequest(\"[011102407]Delete and Update data\");",
                  "",
                  "}",
                  "else{",
                  "    postman.setNextRequest(null);",
                  "}",
                  "",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[010100102]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      },\r\n            {  \r\n         \"requestId\":\"CheckStatutOrcEtape\",\r\n         \"requestContent\":\"select id_statut_etape from orc_etapes where id_processus='{{[010100102]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}' and id_ref_etape='ACG_01_ORC_001'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqPceConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_pce_conservee where code_acquisition in ('SGPCETVPEC') and jour_gazier= TO_DATE('20/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[010100102]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[010100102]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "9d3800de-425e-5dd0-ebf9-2288a5fafc2d",
      "name": "[010100200PCE]PRO_ACG_01_PCE_ORC_002_SGPCETVPEC",
      "description": "o\t0 - ko Case - file stops here\r\no\t1 - ok Case - file go through next step",
      "item": [
        {
          "_postman_id": "24faa6e0-d2c4-be51-8fcc-a1fe953f2e48",
          "name": "[010100200PCE]Drop file PCE",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[010100200PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[010100200PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file PCE\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file PCE\"] = true; ",
                  "   postman.setNextRequest(\"[010100200PCE]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file PCE\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_PCE\",\"fileName\":\"H20170320_PCE_20170320103422_CHR02_SCALA_3-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "1af8324d-840b-316b-8991-daee3796ebd9",
          "name": "[010100200PCE]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckStatutOrcEtape\":",
                  "                tests[\"Check status in ORC_ETAPE\"] = sqlResult[i].results[0].ID_STATUT_ETAPE == \"2\";",
                  "                break;",
                  "            case \"CheckStatutOrcEtapeMessage\":",
                  "                tests[\"Check message in ORC_ETAPE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckAcqPceConservee\":",
                  "                tests[\"Check ACQ_PCE_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "//postman.setNextRequest(\"[011102407]Delete and Update data\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[010100200PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      },\r\n            {  \r\n         \"requestId\":\"CheckStatutOrcEtape\",\r\n         \"requestContent\":\"select id_statut_etape from orc_etapes where id_processus='{{[010100200PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}' and id_ref_etape='ACG_01_ORC_001'\"\r\n      },\r\n                  {  \r\n         \"requestId\":\"CheckStatutOrcEtapeMessage\",\r\n         \"requestContent\":\"select count(*) as COUNT from orc_etapes where id_processus='{{[010100200PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}' and resultat_etape like '%/Enveloppe_VICTOR_PCE/ :  Child element Publication {} at position 1 is unexpected%'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqPceConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_pce_conservee where code_acquisition in ('SGPCETVPEC') and jour_gazier= TO_DATE('20/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[010100200PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[010100200PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "fc35b08e-362e-0fc8-0874-653760ccb09c",
          "name": "[010100201PCE]Drop file PCE - To do",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[010100201]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[010100201]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file PCE\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file PCE\"] = true; ",
                  "   postman.setNextRequest(\"[010100101]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file PCE\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_PCE\",\"fileName\":\"H20170320_PCE_2017032010342_CHR02_SCALA_4-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"10\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "e98a7ea7-d15a-ed45-97a6-f8c8448b01bb",
          "name": "[010100201PCE]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "tests[\"Status code is 200\"] = responseCode.code === 200;",
                  "if (tests[\"Status code is 200\"]){",
                  "    var jsonData = JSON.parse(responseBody);",
                  "    var sqlResult = jsonData.sqlResult;",
                  "    if(sqlResult != null){",
                  "        for(var i= 0; i < sqlResult.length; i++)",
                  "        {",
                  "            if(sqlResult[i].results != null){",
                  "                switch (sqlResult[i].requestId) {",
                  "                case \"CheckStatutOrcProcessus\":",
                  "                    tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                    break;",
                  "                case \"CheckStatutOrcEtape\":",
                  "                    tests[\"Check status in ORC_ETAPE\"] = sqlResult[i].results[0].ID_STATUT_ETAPE == \"3\";",
                  "                    break;",
                  "                case \"CheckAcqPceConservee\":",
                  "                    tests[\"Check ACQ_PCE_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                    break;",
                  "                case \"CheckStockAcquisitionForAcq\":",
                  "                    tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                    break;   ",
                  "                }",
                  "            }",
                  "        }",
                  "    }",
                  "    postman.setNextRequest(null);",
                  "",
                  "}",
                  "else{",
                  "    postman.setNextRequest(null);",
                  "}",
                  "",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[010100201PCE]PRO_ACG_01_PCE_ORC_002_SGPCETVPEC_processid}}'\"\r\n      },\r\n            {  \r\n         \"requestId\":\"CheckStatutOrcEtape\",\r\n         \"requestContent\":\"select id_statut_etape from orc_etapes where id_processus='{{[010100201PCE]PRO_ACG_01_PCE_ORC_002_SGPCETVPEC_processid}}' and id_ref_etape='ACG_01_ORC_001'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqPceConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_pce_conservee where code_acquisition in ('SGPCETVPEC') and jour_gazier= TO_DATE('21/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[010100201PCE]PRO_ACG_01_PCE_ORC_002_SGPCETVPEC_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[010100201PCE]PRO_ACG_01_PCE_ORC_002_SGPCETVPEC_processid}}'\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "39ce9958-3bd5-6732-9456-63ead07341f5",
      "name": "[010100100PCE]PRO_ACG_01_PCE_PRO_ACG_10_ACG_210",
      "description": "",
      "item": []
    },
    {
      "_postman_id": "72589bb4-884b-7e75-a0a9-977f297f7934",
      "name": "[010100100FGA]PRO_ACG_01_FGA_PRO_ACG_10_ACG_210",
      "description": "",
      "item": [
        {
          "_postman_id": "08b3b346-a9b2-9d62-2c84-9052b49b0ca7",
          "name": "[010100100FGA]Delete data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    ",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "    ",
                  "}",
                  "else {",
                  "    ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n            {  \r\n         \"requestId\":\"DeletePointData\",\r\n         \"requestContent\":\"delete from point where uidpoint in (select po.uidpoint from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and po.HORODATE >= TO_DATE('20/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('21/03/2017 09:00:00','DD/MM/YYYY HH24:MI:SS') and Idfga in ('FGATNR1'))\"\r\n      },\r\n      {  \r\n         \"requestId\":\"DeleteAcqPceData\",\r\n         \"requestContent\":\"delete from acq_fga_conservee where uidacq_fga_conservee in (select uidacq_fga_conservee from acq_fga_conservee where code_acquisition in ('FGATNR1') and jour_gazier= TO_DATE('20/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS'))\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "ae588e11-aed8-9fc6-d0db-0c255ed406f3",
          "name": "[010100100FGA]Drop a file",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    ",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "    ",
                  "}",
                  "else {",
                  "    ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105000_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "a40a712e-5d9e-f36c-4184-8ae955f3ab71",
          "name": "[010100100FGA]Check Data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    ",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "    ",
                  "}",
                  "else {",
                  "    ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102401FGA]PRO_ACG_01_FGA_ACG_210_FGATNR1_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('FGATNR1') and jour_gazier= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and  processid='{{[011102401FGA]PRO_ACG_01_FGA_ACG_210_FGATNR1_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"SELECT stockage,count(*) as COUNT from (select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102401FGA]PRO_ACG_01_FGA_ACG_210_FGATNR1_processid}}') and stockage='OUI' group by nom_source,date_mesure,processid,pas_chr,stockage order by date_mesure, processid desc) group by stockage order by stockage\"\r\n      },\r\n\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('FGATNR1') and po.lstime >= (sysdate-1/24/4)\"\r\n      }\r\n\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "0dc19a02-c488-15eb-227c-44e1346cae24",
          "name": "[010100100FGA]Check horodate 1",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    ",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "    ",
                  "}",
                  "else {",
                  "    ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "description": "",
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U="
              },
              {
                "description": "",
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{processId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "74a99959-adb5-528b-37eb-312e1f844352",
          "name": "[010100100FGA]Check avalibility",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    ",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "    ",
                  "}",
                  "else {",
                  "    ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "description": "",
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U="
              },
              {
                "description": "",
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{processId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "a3f832ab-d7ae-d032-dec3-0797b105eb89",
          "name": "[010100100FGA]Check statut",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckStatutOrcEtape\":",
                  "                tests[\"Check status in ORC_ETAPE\"] = sqlResult[i].results[0].ID_STATUT_ETAPE == \"2\";",
                  "                break;",
                  "            case \"CheckStatutOrcEtapeMessage\":",
                  "                tests[\"Check message in ORC_ETAPE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckAcqPceConservee\":",
                  "                tests[\"Check ACQ_PCE_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[010100101PCE]Drop file PCE\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      },\r\n            {  \r\n         \"requestId\":\"CheckStatutOrcEtape\",\r\n         \"requestContent\":\"select id_statut_etape from orc_etapes where id_processus='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}' and id_ref_etape='ACG_01_ORC_001'\"\r\n      },\r\n                  {  \r\n         \"requestId\":\"CheckStatutOrcEtapeMessage\",\r\n         \"requestContent\":\"select count(*) as COUNT from orc_etapes where id_processus='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}' and resultat_etape like '%/Enveloppe_VICTOR_PCE/ :  Child element Publication {} at position 1 is unexpected%'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqPceConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_pce_conservee where code_acquisition in ('SGPCETVPEC') and jour_gazier= TO_DATE('20/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "d0322f30-0df9-6398-2f10-f2bc28ec9b0e",
          "name": "[010100100FGA]Check state 'Cheked'",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckStatutOrcEtape\":",
                  "                tests[\"Check status in ORC_ETAPE\"] = sqlResult[i].results[0].ID_STATUT_ETAPE == \"2\";",
                  "                break;",
                  "            case \"CheckStatutOrcEtapeMessage\":",
                  "                tests[\"Check message in ORC_ETAPE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckAcqPceConservee\":",
                  "                tests[\"Check ACQ_PCE_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[010100101PCE]Drop file PCE\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      },\r\n            {  \r\n         \"requestId\":\"CheckStatutOrcEtape\",\r\n         \"requestContent\":\"select id_statut_etape from orc_etapes where id_processus='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}' and id_ref_etape='ACG_01_ORC_001'\"\r\n      },\r\n                  {  \r\n         \"requestId\":\"CheckStatutOrcEtapeMessage\",\r\n         \"requestContent\":\"select count(*) as COUNT from orc_etapes where id_processus='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}' and resultat_etape like '%/Enveloppe_VICTOR_PCE/ :  Child element Publication {} at position 1 is unexpected%'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqPceConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_pce_conservee where code_acquisition in ('SGPCETVPEC') and jour_gazier= TO_DATE('20/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "fb356fa4-2a34-74f0-48e9-9e2ba7af9ad5",
          "name": "[010100100FGA]Check state 'Locked'",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckStatutOrcEtape\":",
                  "                tests[\"Check status in ORC_ETAPE\"] = sqlResult[i].results[0].ID_STATUT_ETAPE == \"2\";",
                  "                break;",
                  "            case \"CheckStatutOrcEtapeMessage\":",
                  "                tests[\"Check message in ORC_ETAPE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckAcqPceConservee\":",
                  "                tests[\"Check ACQ_PCE_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[010100101PCE]Drop file PCE\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      },\r\n            {  \r\n         \"requestId\":\"CheckStatutOrcEtape\",\r\n         \"requestContent\":\"select id_statut_etape from orc_etapes where id_processus='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}' and id_ref_etape='ACG_01_ORC_001'\"\r\n      },\r\n                  {  \r\n         \"requestId\":\"CheckStatutOrcEtapeMessage\",\r\n         \"requestContent\":\"select count(*) as COUNT from orc_etapes where id_processus='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}' and resultat_etape like '%/Enveloppe_VICTOR_PCE/ :  Child element Publication {} at position 1 is unexpected%'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqPceConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_pce_conservee where code_acquisition in ('SGPCETVPEC') and jour_gazier= TO_DATE('20/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "dbec617c-db0f-d97f-2cb5-4253e8e124a6",
          "name": "[010100100FGA]Drop a file",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    ",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "    ",
                  "}",
                  "else {",
                  "    ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105000_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "d3ac007b-8141-6c7f-675d-5e8d8c9acde5",
          "name": "[010100100FGA]Check Data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    ",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "    ",
                  "}",
                  "else {",
                  "    ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102401FGA]PRO_ACG_01_FGA_ACG_210_FGATNR1_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('FGATNR1') and jour_gazier= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and  processid='{{[011102401FGA]PRO_ACG_01_FGA_ACG_210_FGATNR1_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"SELECT stockage,count(*) as COUNT from (select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102401FGA]PRO_ACG_01_FGA_ACG_210_FGATNR1_processid}}') and stockage='OUI' group by nom_source,date_mesure,processid,pas_chr,stockage order by date_mesure, processid desc) group by stockage order by stockage\"\r\n      },\r\n\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('FGATNR1') and po.lstime >= (sysdate-1/24/4)\"\r\n      }\r\n\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "15e0ca4d-fbdc-18c2-41c3-ab1cf4cc0e6d",
          "name": "[010100100FGA]Check horodate 2",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    ",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "    ",
                  "}",
                  "else {",
                  "    ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "description": "",
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U="
              },
              {
                "description": "",
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{processId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "47371eef-ff10-99e5-fe76-04a7ddd8cee2",
          "name": "[010100100FGA]Drop a file",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    ",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "    ",
                  "}",
                  "else {",
                  "    ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105000_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "63ba3c66-f5e6-1c5c-ca9d-33d7c89bef2d",
          "name": "[010100100FGA]Check non avalibility",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    ",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "    ",
                  "}",
                  "else {",
                  "    ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "description": "",
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U="
              },
              {
                "description": "",
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{processId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "326a2c31-05d2-bdf3-9238-1c8c71ef78e7",
          "name": "[010100100FGA]Drop a file",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    ",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "    ",
                  "}",
                  "else {",
                  "    ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105000_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "ada97d32-cb48-a4d9-0a54-0867f3607c53",
          "name": "[010100100FGA]Check state 'Cheked' copy",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckStatutOrcEtape\":",
                  "                tests[\"Check status in ORC_ETAPE\"] = sqlResult[i].results[0].ID_STATUT_ETAPE == \"2\";",
                  "                break;",
                  "            case \"CheckStatutOrcEtapeMessage\":",
                  "                tests[\"Check message in ORC_ETAPE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckAcqPceConservee\":",
                  "                tests[\"Check ACQ_PCE_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[010100101PCE]Drop file PCE\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      },\r\n            {  \r\n         \"requestId\":\"CheckStatutOrcEtape\",\r\n         \"requestContent\":\"select id_statut_etape from orc_etapes where id_processus='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}' and id_ref_etape='ACG_01_ORC_001'\"\r\n      },\r\n                  {  \r\n         \"requestId\":\"CheckStatutOrcEtapeMessage\",\r\n         \"requestContent\":\"select count(*) as COUNT from orc_etapes where id_processus='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}' and resultat_etape like '%/Enveloppe_VICTOR_PCE/ :  Child element Publication {} at position 1 is unexpected%'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqPceConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_pce_conservee where code_acquisition in ('SGPCETVPEC') and jour_gazier= TO_DATE('20/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[010100100PCE]PRO_ACG_01_PCE_ORC_001_SGPCETVPEC_processid}}'\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "4f8a3b30-52d2-6f41-2c50-4ff420d49b24",
      "name": "[011102400FGA]PRO_ACG_11_PCE_ACG_024_C220 et SGGU2103Z copy",
      "description": "o  0 - First file to generate data from scratch\r\n  Expeted result : all hours set to OUI\r\no  1-First file dropped to generate data\r\n  Expected result : everything is saved (all hours set to OUI)\r\no  2  Same file dropped with the following changes : \r\n"  METMOY 8h has its value changed (89,63 to 90.63)\r\n"  Nothing changed for 9AM\r\no  3  Same file dropped with the following changes : \r\n"  DENMOY 7h quality will be AF (M before)\r\n"  METMOY 8h has its value changed (90,63 to 91.63)\r\n"  Nothing changed for 9AM\r\n  Expected result : 7 and 8AM whould be set to OUI , and NON for 9h\r\no  4  Same file dropped where :\r\n"  9AM is changed PCSMOY will be CS (quality = to the previous one)\r\n"  METMOY 8h has its value changed (91,63 to 89.63)\r\n  Expected result : all set to NON except 8AM\r\no  5 - Same file dropped where only 8AM is changed PCSMOY from AF to CS (quality <)\r\n  Expected result : all set to NON\r\no  6  Same file dropped but PCSMOY to CS for 8h\r\n  Expected result : 8AM set to OUI\r\n\r\no  7  Run first file\r\n"  PCSMOY is set to 6/7/8AM AF, rest are set to CS\r\n"  Expected results : everything set to OUI\r\no  8  Run second file\r\n"  PCSMOY is unchanged for 678, for rest of the hours, they are set to AF\r\n"  Expected results everything set to OUI except 6/7/8AM",
      "item": [
        {
          "_postman_id": "aa81aab9-9254-6a5f-650a-465d1f6d2759",
          "name": "[011102400FGA]Delete and Update data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "for(var i= 0; i < sqlResult.length; i++)",
                  "{",
                  "    switch (sqlResult[i].requestId) {",
                  "        case \"DeletePointData\":",
                  "            tests[\"Delete Point Data\"] = true;",
                  "            break;",
                  "        case \"DeleteAcqFgaData\":",
                  "            tests[\"Delete Acq_Fga Data\"] = true;",
                  "            break;",
                  "        case \"DeletePubPointJmnFgaData\":",
                  "            tests[\"Delete Pub_Point_Jmn_Fga Data\"] = true;",
                  "            break;",
                  "    }",
                  "}",
                  "if ( tests[\"Delete Point Data\"] && tests[\"Delete Acq_Fga Data\"] && tests[\"Delete Pub_Point_Jmn_Fga Data\"]){",
                  "    tests[\"Delete data Sum up\"] = true; ",
                  "    postman.setNextRequest(\"[011102400FGA]Drop file FGA\");",
                  "}",
                  "else {",
                  "   tests[\"Delete data Sum up\"] = fase; ",
                  "   //postman.setNextRequest(null);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n            {  \r\n         \"requestId\":\"DeletePointData\",\r\n         \"requestContent\":\"delete from point where uidpoint in (select po.uidpoint from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('23/02/2017 09:00:00','DD/MM/YYYY HH24:MI:SS') and Idfga in ('C220'))\"\r\n      },\r\n      {  \r\n         \"requestId\":\"DeleteAcqFgaData\",\r\n         \"requestContent\":\"delete from acq_fga_conservee where uidacq_fga_conservee in (select uidacq_fga_conservee from acq_fga_conservee where code_acquisition in ('C220'))\"\r\n      },\r\n      {  \r\n         \"requestId\":\"DeletePubPointJmnFgaData\",\r\n         \"requestContent\":\"delete from pub_point_jmn_fga where uidgrandeur in (select pp.uidgrandeur from pub_point_jmn_fga pp, fga p, grandeur g, GRANDEURS_OBJET go where  pp.uidgrandeur=g.UIDGRANDEUR and g.UIDGRANDEURS_OBJET=go.UIDGRANDEURS_OBJET and go.uidgrandeurs_objet=p.uidgrandeurs_objet and p.idfga='C220' and horodate between TO_DATE('2017-02-23 06:00:00', 'YYYY-MM-DD HH24:MI:SS')and TO_DATE('2017-02-24 05:00:00', 'YYYY-MM-DD HH24:MI:SS'))\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "bfe82101-63c1-ab40-7cba-9a35f0252dd6",
          "name": "[011102400FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102400FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105000_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "3d56657a-3b67-ef0d-f99c-46b15f49b109",
          "name": "[011102400FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102400FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var sourcprocessid = postman.getEnvironmentVariable(\"[011102401]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\");",
                  "console.log(sourcprocessid);"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "e66f2292-f56a-1337-03a6-4e01d2bc48a6",
          "name": "[011102400FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                ",
                  "                if (sqlResult[i].results.length ==4){",
                  "                    if (sqlResult[i].results[0].STOCKAGE==\"OUI\" && sqlResult[i].results[1].STOCKAGE==\"OUI\" && sqlResult[i].results[2].STOCKAGE==\"OUI\" && sqlResult[i].results[3].STOCKAGE==\"OUI\"){",
                  "                        tests[\"Check Stock_acquisition2\"]=true;",
                  "                    }",
                  "                    else{",
                  "                        tests[\"Check Stock_acquisition2\"]=false;",
                  "                    }",
                  "                }",
                  "                else{",
                  "                     tests[\"Check Stock_acquisition2\"]=false;",
                  "                }",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckPointData\":",
                  "                tests[\"Check POINT data\"] = sqlResult[i].results[0].COUNT == \"130\";",
                  "                break;",
                  "",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[011102401FGA]Delete and Update data\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('C220') and jour_gazier= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}') group by date_mesure,stockage order by date_mesure asc\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('C220') and po.lstime >= (sysdate-1/24/4)\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102400FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "e5f936d8-5d41-0879-f75c-945743eee12f",
          "name": "[011102401FGA]Delete and Update data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "for(var i= 0; i < sqlResult.length; i++)",
                  "{",
                  "    switch (sqlResult[i].requestId) {",
                  "        case \"UpdatePointData\":",
                  "            tests[\"Update Point Data\"] = true;",
                  "            break;",
                  "        case \"DeletePointData\":",
                  "            tests[\"Delete Point Data\"] = true;",
                  "            break;",
                  "    }",
                  "}",
                  "if (tests[\"Update Point Data\"] && tests[\"Delete Point Data\"] ){",
                  "    tests[\"Delete data Sum up\"] = true; ",
                  "    postman.setNextRequest(\"[011102401FGA]Drop file FGA\");",
                  "}",
                  "else {",
                  "   tests[\"Delete data Sum up\"] = fase; ",
                  "   //postman.setNextRequest(null);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"UpdatePointData\",\r\n         \"requestContent\":\"update point set uidqualite_point='15', valeur='0' where uidpoint in (select po.uidpoint from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') and Idfga in ('C220'))\"\r\n      },\r\n            {  \r\n         \"requestId\":\"DeletePointData\",\r\n         \"requestContent\":\"delete from point where uidpoint in (select po.uidpoint from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and po.HORODATE >= TO_DATE('23/02/2017 09:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('23/02/2017 09:00:00','DD/MM/YYYY HH24:MI:SS') and Idfga in ('C220'))\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "4a5bb478-73da-64eb-8537-38a45077bb55",
          "name": "[011102401FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102401FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105002_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "3c0c76f2-074e-0b54-3650-fe86ddf43504",
          "name": "[011102401FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102401FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "3f16980b-f04c-4db0-8849-1962c076b7cf",
          "name": "[011102401FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                    tests[\"Check STOCK_ACQUISITION2\"] = sqlResult[i].results[0].COUNT == \"5\";",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckPointData\":",
                  "                tests[\"Check POINT data\"] = sqlResult[i].results[0].COUNT == \"130\";",
                  "                break;",
                  "            case \"CheckPubPointJmnFgaData\":",
                  "                tests[\"Check PUB_POINT_JMN_FGA data\"] = sqlResult[i].results[0].COUNT == \"260\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[011102402FGA]Drop file FGA\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('C220') and jour_gazier= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and  processid='{{[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"SELECT stockage,count(*) as COUNT from (select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}') and stockage='OUI' group by nom_source,date_mesure,processid,pas_chr,stockage order by date_mesure, processid desc) group by stockage order by stockage\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('C220') and po.lstime >= (sysdate-1/24/4)\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPubPointJmnFgaData\",\r\n         \"requestContent\":\"select count(*) as COUNT from PUB_POINT_jmn_fga pp  inner join grandeur on pp.uidgrandeur = grandeur.uidgrandeur  where  horodate between TO_DATE('2017-02-23 06:00:00', 'YYYY-MM-DD HH24:MI:SS')and TO_DATE('2017-02-24 05:00:00', 'YYYY-MM-DD HH24:MI:SS')  and idgrandeur like '%C220%'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102401FGA]PRO_ACG_01_FGA_TNR_SGTUH97A_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "2c7592f7-0713-1d40-1d3b-2966816d7473",
          "name": "[011102402FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102402FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105003_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "4a0ceacf-6107-14fd-a47d-21b3b0f70cfc",
          "name": "[011102402FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102402FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var sourcprocessid = postman.getEnvironmentVariable(\"[011102401]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\");",
                  "console.log(sourcprocessid);"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "6ad24868-0944-269b-13af-361ae2725e4d",
          "name": "[011102402FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                ",
                  "                if (sqlResult[i].results.length ==4){",
                  "                    if (sqlResult[i].results[0].STOCKAGE==\"OUI\" && sqlResult[i].results[1].STOCKAGE==\"OUI\" && sqlResult[i].results[2].STOCKAGE==\"OUI\" && sqlResult[i].results[3].STOCKAGE==\"NON\"){",
                  "                        tests[\"Check Stock_acquisition2\"]=true;",
                  "                    }",
                  "                    else{",
                  "                        tests[\"Check Stock_acquisition2\"]=false;",
                  "                    }",
                  "                }",
                  "                else{",
                  "                     tests[\"Check Stock_acquisition2\"]=false;",
                  "                }",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckPointData\":",
                  "                tests[\"Check POINT data\"] = sqlResult[i].results[0].COUNT == \"130\";",
                  "                break;",
                  "            case \"CheckPubPointJmnFgaData\":",
                  "                tests[\"Check PUB_POINT_JMN_FGA data\"] = sqlResult[i].results[0].COUNT == \"390\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[011102403FGA]Update data\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('C220') and jour_gazier= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}') group by date_mesure,stockage order by date_mesure asc\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('C220') and po.lstime >= (sysdate-1/24/4)\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPubPointJmnFgaData\",\r\n         \"requestContent\":\"select count(*) as COUNT from PUB_POINT_jmn_fga pp  inner join grandeur on pp.uidgrandeur = grandeur.uidgrandeur  where  horodate between TO_DATE('2017-02-23 06:00:00', 'YYYY-MM-DD HH24:MI:SS')and TO_DATE('2017-02-24 05:00:00', 'YYYY-MM-DD HH24:MI:SS')  and idgrandeur like '%C220%'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102402FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "f3d97c92-4504-7ac9-aea1-91e41ff1c021",
          "name": "[011102403FGA]Update data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "for(var i= 0; i < sqlResult.length; i++)",
                  "{",
                  "    switch (sqlResult[i].requestId) {",
                  "        case \"UpdatePointData\":",
                  "            tests[\"Update Point Data\"] = true;",
                  "            break;",
                  "    }",
                  "}",
                  "if (tests[\"Update Point Data\"]){",
                  "    tests[\"Update data Sum up\"] = true; ",
                  "    postman.setNextRequest(\"[011102403FGA]Drop file FGA\");",
                  "}",
                  "else {",
                  "   tests[\"Delete data Sum up\"] = fase; ",
                  "   //postman.setNextRequest(null);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"UpdatePointData\",\r\n         \"requestContent\":\"update point set uidqualite_point='15', valeur='0' where uidpoint in (select po.uidpoint from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and po.HORODATE >= TO_DATE('23/02/2017 07:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('23/02/2017 07:00:00','DD/MM/YYYY HH24:MI:SS') and Idfga in ('C220') and (type_grandeur in ('DENMOY')))\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "acc1d1ba-ad7c-3926-c99d-3d73dfcf0cc9",
          "name": "[011102403FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102403FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105004_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "c95c8e8c-f248-6bf6-6e6f-c6d5d1850540",
          "name": "[011102403FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102403FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var sourcprocessid = postman.getEnvironmentVariable(\"[011102401]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\");",
                  "console.log(sourcprocessid);"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "a1349cfc-6b4d-7a6a-fb0e-bfdf709bb62b",
          "name": "[011102403FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                ",
                  "                if (sqlResult[i].results.length ==4){",
                  "                    if (sqlResult[i].results[0].STOCKAGE==\"NON\" && sqlResult[i].results[1].STOCKAGE==\"OUI\" && sqlResult[i].results[2].STOCKAGE==\"OUI\" && sqlResult[i].results[3].STOCKAGE==\"NON\"){",
                  "                        tests[\"Check Stock_acquisition2\"]=true;",
                  "                    }",
                  "                    else{",
                  "                        tests[\"Check Stock_acquisition2\"]=false;",
                  "                    }",
                  "                }",
                  "                else{",
                  "                     tests[\"Check Stock_acquisition2\"]=false;",
                  "                }",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckPointData\":",
                  "                tests[\"Check POINT data\"] = sqlResult[i].results[0].COUNT == \"130\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[011102404FGA]Drop file FGA\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('C220') and jour_gazier= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}') and PAS_CHR='3600' group by date_mesure,stockage order by date_mesure asc\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('C220') and po.lstime >= (sysdate-1/24/4)\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102403FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "1410c197-7199-7b39-f593-ddb722d8f664",
          "name": "[011102404FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102404FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105014_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "7307a68d-309b-dc26-75e3-952e014868b6",
          "name": "[011102404FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102404FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var sourcprocessid = postman.getEnvironmentVariable(\"[011102401FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\");",
                  "console.log(sourcprocessid);"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "09302a52-efc5-773d-c922-05ab2c0c3ae0",
          "name": "[011102404FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                ",
                  "                if (sqlResult[i].results.length ==4){",
                  "                    if (sqlResult[i].results[0].STOCKAGE==\"NON\" && sqlResult[i].results[1].STOCKAGE==\"NON\" && sqlResult[i].results[2].STOCKAGE==\"OUI\" && sqlResult[i].results[3].STOCKAGE==\"NON\"){",
                  "                        tests[\"Check Stock_acquisition2\"]=true;",
                  "                    }",
                  "                    else{",
                  "                        tests[\"Check Stock_acquisition2\"]=false;",
                  "                    }",
                  "                }",
                  "                else{",
                  "                     tests[\"Check Stock_acquisition2\"]=false;",
                  "                }",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckPointData\":",
                  "                tests[\"Check POINT data\"] = sqlResult[i].results[0].COUNT == \"130\";",
                  "                break;",
                  "",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[011102405FGA]Drop file FGA\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('C220') and jour_gazier= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}') and PAS_CHR='3600' group by date_mesure,stockage order by date_mesure asc\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('C220') and po.lstime >= (sysdate-1/24/4)\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102404FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "d4f48304-993c-4ba2-f575-ab6355e2135f",
          "name": "[011102405FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102405FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105005_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "d3b2f9ea-c393-aa1d-7bdb-f12fafe47a94",
          "name": "[011102405FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102405FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var sourcprocessid = postman.getEnvironmentVariable(\"[011102401]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\");",
                  "console.log(sourcprocessid);"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "df211f61-3a46-b674-1233-420831f7cc1b",
          "name": "[011102405FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                ",
                  "                if (sqlResult[i].results.length ==4){",
                  "                    if (sqlResult[i].results[0].STOCKAGE==\"NON\" && sqlResult[i].results[1].STOCKAGE==\"NON\" && sqlResult[i].results[2].STOCKAGE==\"NON\" && sqlResult[i].results[3].STOCKAGE==\"NON\"){",
                  "                        tests[\"Check Stock_acquisition2\"]=true;",
                  "                    }",
                  "                    else{",
                  "                        tests[\"Check Stock_acquisition2\"]=false;",
                  "                    }",
                  "                }",
                  "                else{",
                  "                     tests[\"Check Stock_acquisition2\"]=false;",
                  "                }",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckPointData\":",
                  "                tests[\"Check POINT data\"] = sqlResult[i].results[0].COUNT == \"130\";",
                  "                break;",
                  "",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[011102406FGA]Update data\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('C220') and jour_gazier= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}') group by date_mesure,stockage order by date_mesure asc\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('C220') and po.lstime >= (sysdate-1/24/4)\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102405FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "bfbd4101-5f12-b23f-c592-e4572e77f5d4",
          "name": "[011102406FGA]Update data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "for(var i= 0; i < sqlResult.length; i++)",
                  "{",
                  "    switch (sqlResult[i].requestId) {",
                  "        case \"UpdatePointData\":",
                  "            tests[\"Update Point Data\"] = true;",
                  "            break;",
                  "    }",
                  "}",
                  "if (tests[\"Update Point Data\"]){",
                  "    tests[\"Update data Sum up\"] = true; ",
                  "    postman.setNextRequest(\"[011102406FGA]Drop file FGA\");",
                  "}",
                  "else {",
                  "   tests[\"Delete data Sum up\"] = fase; ",
                  "   //postman.setNextRequest(null);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"UpdatePointData\",\r\n         \"requestContent\":\"update point set uidqualite_point='15' where uidpoint in (select po.uidpoint from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and po.HORODATE >= TO_DATE('23/02/2017 08:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('23/02/2017 08:00:00','DD/MM/YYYY HH24:MI:SS') and Idfga in ('C220'))\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "9a74a35d-4d30-d4ec-f652-e49b734f07aa",
          "name": "[011102406FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102406FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105006_CHR02_SCALA_18-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "17642d61-649b-05d9-831c-3617c0b4944d",
          "name": "[011102406FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102406FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var sourcprocessid = postman.getEnvironmentVariable(\"[011102401]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\");",
                  "console.log(sourcprocessid);"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "31d38b80-bdd4-7f03-ab07-8c851a55ae1b",
          "name": "[011102406FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                ",
                  "                if (sqlResult[i].results.length ==4){",
                  "                    if (sqlResult[i].results[0].STOCKAGE==\"NON\" && sqlResult[i].results[1].STOCKAGE==\"NON\" && sqlResult[i].results[2].STOCKAGE==\"OUI\" && sqlResult[i].results[3].STOCKAGE==\"NON\"){",
                  "                        tests[\"Check Stock_acquisition2\"]=true;",
                  "                    }",
                  "                    else{",
                  "                        tests[\"Check Stock_acquisition2\"]=false;",
                  "                    }",
                  "                }",
                  "                else{",
                  "                     tests[\"Check Stock_acquisition2\"]=false;",
                  "                }",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckPointData\":",
                  "                tests[\"Check POINT data\"] = sqlResult[i].results[0].COUNT == \"130\";",
                  "                break;",
                  "",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[011102407FGA]Delete and Update data\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('C220') and jour_gazier= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}') and pas_chr='3600' group by date_mesure,stockage order by date_mesure asc\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('23/02/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('24/02/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('C220') and po.lstime >= (sysdate-1/24/4)\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102406FGA]PRO_ACG_11_FGA_ACG_024_C220_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "c17a9aab-cc3b-d58c-604e-a8f6a60f64b7",
          "name": "[011102407FGA]Delete and Update data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "for(var i= 0; i < sqlResult.length; i++)",
                  "{",
                  "    switch (sqlResult[i].requestId) {",
                  "        case \"DeletePointData\":",
                  "            tests[\"Delete Point Data\"] = true;",
                  "            break;",
                  "        case \"DeleteAcqFgaData\":",
                  "            tests[\"Delete Acq_Fga Data\"] = true;",
                  "            break;",
                  "        case \"DeletePubPointJmnFgaData\":",
                  "            tests[\"Delete Pub_Point_Jmn_Fga Data\"] = true;",
                  "            break;",
                  "    }",
                  "}",
                  "if ( tests[\"Delete Point Data\"] && tests[\"Delete Acq_Fga Data\"] && tests[\"Delete Pub_Point_Jmn_Fga Data\"]){",
                  "    tests[\"Delete data Sum up\"] = true; ",
                  "    postman.setNextRequest(\"[011102407FGA]Drop file FGA\");",
                  "}",
                  "else {",
                  "   tests[\"Delete data Sum up\"] = fase; ",
                  "   //postman.setNextRequest(null);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n            {  \r\n         \"requestId\":\"DeletePointData\",\r\n         \"requestContent\":\"Delete from point where uidpoint in (select uidpoint from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and po.HORODATE >= TO_DATE('05/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('07/03/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') and idfga in ('SGGU2103Z'))\"\r\n      },\r\n      {  \r\n         \"requestId\":\"DeleteAcqFgaData\",\r\n         \"requestContent\":\"delete from acq_fga_conservee where uidacq_fga_conservee in (select uidacq_fga_conservee from acq_fga_conservee where code_acquisition in ('SGGU2103Z'))\"\r\n      },\r\n      {  \r\n         \"requestId\":\"DeletePubPointJmnFgaData\",\r\n         \"requestContent\":\"delete from pub_point_jmn_fga where uidgrandeur in (select pp.uidgrandeur from pub_point_jmn_fga pp, fga p, grandeur g, GRANDEURS_OBJET go where  pp.uidgrandeur=g.UIDGRANDEUR and g.UIDGRANDEURS_OBJET=go.UIDGRANDEURS_OBJET and go.uidgrandeurs_objet=p.uidgrandeurs_objet and p.idfga='SGGU2103Z' and horodate between TO_DATE('2017-03-05 06:00:00', 'YYYY-MM-DD HH24:MI:SS')and TO_DATE('2017-03-07 05:00:00', 'YYYY-MM-DD HH24:MI:SS'))\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "fd4e4aa7-f07d-23bc-1572-09379b7be5c4",
          "name": "[011102407FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102407FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"J20170306_FGA_20170307062203_CHR02_SCALA_100-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "9f78e1cf-a4f1-619d-0866-cfab03b07d23",
          "name": "[011102407FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102407FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "083c42bf-45d1-0e47-5154-6bb69538cbca",
          "name": "[011102407FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                tests[\"Check Stock_acquisition2\"]= sqlResult[i].results[0].COUNT == \"24\";",
                  "",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "postman.setNextRequest(\"[011102408FGA]Drop file FGA\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('SGGU2103Z') and jour_gazier= TO_DATE('06/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"select stockage,count(*) as COUNT from (select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}') and pas_chr='3600' group by date_mesure,stockage order by date_mesure asc) group by stockage\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102407FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "935b169e-3bbb-d6fd-87ae-23d00f1858fa",
          "name": "[011102408FGA]Drop file FGA",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_sourceProcessId\",jsonData.sourceProcessId);",
                  "",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check drop file FGA\"] = true; ",
                  "   postman.setNextRequest(\"[011102408FGA]Check process cal end\");",
                  "}",
                  "else {",
                  "    tests[\"Check drop file FGA\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"J20170306_FGA_20170307061702_CHR02_SCALA_101-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "445df195-c237-5fa3-6893-2f5019db3e55",
          "name": "[011102408FGA]Check process cal end",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "   tests[\"Check process cal end\"] = true; ",
                  "   postman.setNextRequest(\"[011102408FGA]Check data\");",
                  "}",
                  "else {",
                  "    tests[\"Check process cal end\"] = false;",
                  "    //postman.setNextRequest(null);  ",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var sourcprocessid = postman.getEnvironmentVariable(\"[011102401]PRO_ACG_11_FGA_ACG_024_C220_sourceProcessId\");",
                  "console.log(sourcprocessid);"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_sourceProcessId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "96f4b2eb-fe5b-b841-afbb-1fe0d7283654",
          "name": "[011102408FGA]Check data",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "if(sqlResult != null){",
                  "    for(var i= 0; i < sqlResult.length; i++)",
                  "    {",
                  "        if(sqlResult[i].results != null){",
                  "            switch (sqlResult[i].requestId) {",
                  "            case \"CheckStatutOrcProcessus\":",
                  "                tests[\"Check status in ORC_PROCESSUS\"] = sqlResult[i].results[0].ID_STATUT_PROCESSUS == \"4\";",
                  "                break;",
                  "            case \"CheckAcqFgaConservee\":",
                  "                tests[\"Check ACQ_FGA_CONSERVEE\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisition2\":",
                  "                if (sqlResult[i].results.length ==24){",
                  "                    if (sqlResult[i].results[0].STOCKAGE==\"NON\" ",
                  "                    && sqlResult[i].results[1].STOCKAGE==\"NON\" ",
                  "                    && sqlResult[i].results[2].STOCKAGE==\"NON\" ",
                  "                    && sqlResult[i].results[3].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[4].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[5].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[6].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[7].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[8].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[9].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[10].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[11].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[12].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[13].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[14].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[15].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[16].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[17].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[18].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[19].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[20].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[21].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[22].STOCKAGE==\"OUI\" ",
                  "                    && sqlResult[i].results[23].STOCKAGE==\"OUI\"){",
                  "                        tests[\"Check Stock_acquisition2\"]=true;",
                  "                    }",
                  "                    else{",
                  "                        tests[\"Check Stock_acquisition2\"]=false;",
                  "                    }",
                  "                }",
                  "                else{",
                  "                     tests[\"Check Stock_acquisition2\"]=false;",
                  "                }",
                  "                break;",
                  "            case \"CheckDmdCalcul\":",
                  "                tests[\"Check DMD_CALCUL\"] = sqlResult[i].results[0].COUNT == \"1\";",
                  "                break;",
                  "            case \"CheckStockAcquisitionCal\":",
                  "                tests[\"Check STOCK_ACQUISITION_CAL\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;",
                  "            case \"CheckPointData\":",
                  "                tests[\"Check POINT data\"] = sqlResult[i].results[0].COUNT >= \"1\";",
                  "                break;",
                  "",
                  "            case \"CheckStockAcquisitionForAcq\":",
                  "                tests[\"Check STOCK_ACQUISITION for Acq\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break;   ",
                  "            case \"CheckStockAcquisitionForCal\":",
                  "                tests[\"Check STOCK_ACQUISITION For Cal\"] = sqlResult[i].results[0].COUNT == \"0\";",
                  "                break; ",
                  "            }",
                  "        }",
                  "    }",
                  "}",
                  "//postman.setNextRequest(\"[011102407]Delete and Update data\");",
                  ""
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "//postman.setNextRequest(null);",
                  "",
                  ""
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{  \r\n   \"sqlRequest\":[  \r\n      {  \r\n         \"requestId\":\"CheckStatutOrcProcessus\",\r\n         \"requestContent\":\"select id_statut_processus from orc_processus where id_correlation='{{[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckAcqFgaConservee\",\r\n         \"requestContent\":\"select count(*) as COUNT from acq_fga_conservee where code_acquisition in ('SGGU2103Z') and jour_gazier= TO_DATE('06/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and processid='{{[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisition2\",\r\n         \"requestContent\":\"select date_mesure,stockage from stock_acquisition2 where processid in ('{{[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}') and pas_chr='3600' group by date_mesure,stockage order by date_mesure asc\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckDmdCalcul\",\r\n         \"requestContent\":\"select count(*) as COUNT from dmd_calcul where prec_processid='{{[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition_cal where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}')\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckPointData\",\r\n         \"requestContent\":\"select count(*) as COUNT from fga p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and ((po.HORODATE >= TO_DATE('06/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('07/03/2017 05:00:00','DD/MM/YYYY HH24:MI:SS') )) and Idfga in ('SGGU2103Z') and po.lstime >= (sysdate-1/24/4)\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForAcq\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where lstime >=(sysdate-1/24) and processid='{{[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}'\"\r\n      },\r\n      {  \r\n         \"requestId\":\"CheckStockAcquisitionForCal\",\r\n         \"requestContent\":\"select count(*) as COUNT from stock_acquisition where processid in (select courant_processid from dmd_calcul where prec_processid='{{[011102408FGA]PRO_ACG_11_FGA_ACG_024_SGGU2103Z_processid}}')\"\r\n      }\r\n   ]\r\n}"
            },
            "description": ""
          },
          "response": []
        }
      ]
    },
    {
      "_postman_id": "701444b4-2f88-8b56-1946-01d5bf86c86e",
      "name": "[010100201PCE]Drop file PCE",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "if (tests[\"Status code is 200\"]){",
              "    var jsonData = JSON.parse(responseBody);",
              "    postman.setEnvironmentVariable(\"[010100201PCE]PRO_ACG_01_PCE_ORC_002_SGPCETVPEC_processid\",jsonData.processId);",
              "    postman.setEnvironmentVariable(\"[010100201PCE]PRO_ACG_01_PCE_ORC_002_SGPCETVPEC_sourceProcessId\",jsonData.sourceProcessId);",
              "    ",
              "    if (jsonData.statusProcess === \"2\"){",
              "        tests[\"Check drop file PCE\"] = false;",
              "        //postman.setNextRequest(null);",
              "    }",
              "    else if (jsonData.statusProcess === \"4\"){",
              "       tests[\"Check drop file PCE\"] = true; ",
              "       postman.setNextRequest(\"[010100201PCE]Check data\");",
              "    }",
              "    else {",
              "        tests[\"Check drop file PCE\"] = false;",
              "        //postman.setNextRequest(null);  ",
              "    }",
              "}",
              "else{",
              "    postman.setNextRequest(null);",
              "}"
            ]
          }
        }
      ],
      "request": {
        "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
            "description": ""
          },
          {
            "key": "Content-Type",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\"alias\":\"SCALA_PCE\",\"fileName\":\"H20170321_PCE_20170321103422_CHR02_SCALA_3-1F.xml.gz\",\"wait\":\"true\",\"waitTimeout\":\"90\"}"
        },
        "description": ""
      },
      "response": []
    },
    {
      "_postman_id": "ecc0653e-1bdf-ab1c-daac-5a82a93dd3d6",
      "name": "[010100201PCE]Delete data",
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "tests[\"Status code is 200\"] = responseCode.code === 200;",
              "if (tests[\"Status code is 200\"]){",
              "    var jsonData = JSON.parse(responseBody);",
              "    var sqlResult = jsonData.sqlResult;",
              "    for(var i= 0; i < sqlResult.length; i++)",
              "    {",
              "        switch (sqlResult[i].requestId) {",
              "            case \"DeletePointData\":",
              "                tests[\"Delete Point Data\"] = true;",
              "                break;",
              "            case \"DeleteAcqPceData\":",
              "                tests[\"Delete Acq_Pce Data\"] = true;",
              "                break;",
              "        }",
              "    }",
              "    if ( tests[\"Delete Point Data\"] && tests[\"Delete Acq_Pce Data\"]){",
              "        tests[\"Delete data Sum up\"] = true; ",
              "        postman.setNextRequest(\"[010100201PCE]Drop file PCE\");",
              "    }",
              "    else {",
              "       tests[\"Delete data Sum up\"] = fase; ",
              "       //postman.setNextRequest(null);",
              "    }",
              "}",
              "else{",
              "    postman.setNextRequest(null);",
              "}",
              "",
              ""
            ]
          }
        }
      ],
      "request": {
        "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
            "description": ""
          },
          {
            "key": "Content-Type",
            "value": "application/json",
            "description": ""
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{  \r\n   \"sqlRequest\":[  \r\n            {  \r\n         \"requestId\":\"DeletePointData\",\r\n         \"requestContent\":\"delete from point where uidpoint in (select po.uidpoint from pce p,grandeurs_objet gr,grandeur g,point po,qualite_point qpo where p.UIDGRANDEURS_OBJET=gr.UIDGRANDEURS_OBJET and gr.UIDGRANDEURS_OBJET=g.UIDGRANDEURS_OBJET and g.UIDGRANDEUR=po.UIDGRANDEUR and po.UIDQUALITE_POINT=qpo.UIDQUALITE_POINT and po.HORODATE >= TO_DATE('21/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS') and po.HORODATE <= TO_DATE('22/03/2017 09:00:00','DD/MM/YYYY HH24:MI:SS') and Idpce in ('SGPCETVPEC'))\"\r\n      },\r\n      {  \r\n         \"requestId\":\"DeleteAcqPceData\",\r\n         \"requestContent\":\"delete from acq_pce_conservee where uidacq_pce_conservee in (select uidacq_pce_conservee from acq_pce_conservee where code_acquisition in ('SGPCETVPEC') and jour_gazier= TO_DATE('21/03/2017 06:00:00','DD/MM/YYYY HH24:MI:SS'))\"\r\n      }\r\n   ]\r\n}"
        },
        "description": ""
      },
      "response": []
    }
  ]
}