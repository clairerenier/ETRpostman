{
  "variables": [],
  "info": {
    "name": "Template",
    "_postman_id": "2b40db85-1b71-9c15-625d-53cf70a4a7c2",
    "description": "",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "_postman_id": "604426f7-c443-345a-b9e5-44e7b0c741f0",
      "name": "Template",
      "description": "",
      "item": [
        {
          "_postman_id": "b32918c1-291c-f5b4-8056-d464a81a323f",
          "name": "Template Start File",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"processId\",jsonData.processId);",
                  "postman.setEnvironmentVariable(\"sourceProcessId\",jsonData.sourceProcessId);",
                  "var statusProcess = jsonData.statusProcess;"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/files/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/xml",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"alias\":\"SCALA_FGA\",\"fileName\":\"H20170223_FGA_20170223105002_CHR02_SCALA_18-1F.xml.gz\"}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "0cf69dbd-0da5-dba1-f886-b9b2dd9b9921",
          "name": "Template CALL SQL",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "var sqlResult = jsonData.sqlResult;",
                  "for(var i= 0; i < sqlResult.length; i++)",
                  "{",
                  "    switch (sqlResult[i].requestId) {",
                  "        case \"Request1\":",
                  "            var results = sqlResult[i].results",
                  "            tests[\"Request1\"] = true;",
                  "            for(var j= 0; j < sqlResult.length; j++)",
                  "            {",
                  "                if(sqlResult[j].toto == \"toto\"){",
                  "                    ",
                  "                }",
                  "            }",
                  "            break;",
                  "        default:",
                  "            // Instructions à exécuter lorsqu'aucune des valeurs",
                  "            // ne correspond ",
                  "            instructions_def;",
                  "            break;",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/customSQL/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"sqlRequest\":[{\"requestId\":\"Request1\",\"requestContent\":\"select * from WM_CALCUL\"}]}"
            },
            "description": ""
          },
          "response": []
        },
        {
          "_postman_id": "52b35177-42ca-ed22-7832-0238499d3fb4",
          "name": "Template Check Process",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "if (jsonData.statusProcess === \"2\"){",
                  "    ",
                  "}",
                  "else if (jsonData.statusProcess === \"4\"){",
                  "    ",
                  "}",
                  "else {",
                  "    ",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "url": "http://{{ipPort}}/rest/ETR_FRMK_ADMIN/ws/tests/checkProcess/",
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Basic QWRtaW5pc3RyYXRvcjptYW5hZ2U=",
                "description": ""
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": ""
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"processCode\":\"PRO_CAL_02\",\"processId\":\"{{processId}}\",\"waitTimeout\":\"90\"}"
            },
            "description": ""
          },
          "response": []
        }
      ]
    }
  ]
}